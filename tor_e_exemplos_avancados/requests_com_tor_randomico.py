import requests
from random import randint


def get_tor_session(port=9050):
    session = requests.session()
    # Tor uses the 9050 port as the default socks port
    session.proxies = {'http':  'socks5://127.0.0.1:{}'.format(port),
                       'https': 'socks5://127.0.0.1:{}'.format(port)}
    return session


sessoes_do_tor = [get_tor_session(9050), get_tor_session(9052)]


for vez in range(0, 10):
    num_da_sessao = randint(0, 1)
    sessao = sessoes_do_tor[num_da_sessao]

    # Following prints your normal public IP
    print(sessao.get("http://httpbin.org/ip").text)
